{% extends "base.html" %}

{% block title %}اتصل بنا - المدرسة الإلكترونية للزاوية التجانية{% endblock %}

{% block content %}

<!-- Contact Hero -->
<section class="page-hero contact-hero">
    <div class="hero-overlay"></div>
    <div class="container">
        <div class="hero-content text-center" data-aos="fade-up">
            <i class="fas fa-envelope-open-text" style="font-size: 4rem; margin-bottom: 20px;"></i>
            <h1>تواصل معنا</h1>
            <p>نحن هنا للإجابة على استفساراتك ومساعدتك في رحلتك التعليمية</p>
        </div>
    </div>
</section>

<!-- Contact Section -->
<section class="section contact-section">
    <div class="container">
        <div class="contact-wrapper">
            
            <!-- Contact Form -->
            <div class="contact-form-container" data-aos="fade-right">
                <div class="form-header">
                    <h2><i class="fas fa-paper-plane"></i> أرسل رسالة</h2>
                    <p>املأ النموذج أدناه وسنتواصل معك في أقرب وقت</p>
                </div>
                
                <form id="contactForm" class="contact-form">
                    <div class="form-group">
                        <label for="contactName">
                            <i class="fas fa-user"></i> الاسم الكامل <span class="required">*</span>
                        </label>
                        <input type="text" id="contactName" name="name" required placeholder="أدخل اسمك الكامل">
                        <span class="error-message"></span>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="contactEmail">
                                <i class="fas fa-envelope"></i> البريد الإلكتروني <span class="required">*</span>
                            </label>
                            <input type="email" id="contactEmail" name="email" required placeholder="example@email.com">
                            <span class="error-message"></span>
                        </div>
                        
                        <div class="form-group">
                            <label for="contactPhone">
                                <i class="fas fa-phone"></i> رقم الهاتف
                            </label>
                            <input type="tel" id="contactPhone" name="phone" placeholder="0555123456">
                            <span class="error-message"></span>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="contactSubject">
                            <i class="fas fa-tag"></i> الموضوع <span class="required">*</span>
                        </label>
                        <select id="contactSubject" name="subject" required>
                            <option value="">اختر الموضوع</option>
                            <option value="استفسار عام">استفسار عام</option>
                            <option value="التسجيل والقبول">التسجيل والقبول</option>
                            <option value="البرامج التعليمية">البرامج التعليمية</option>
                            <option value="الدعم التقني">الدعم التقني</option>
                            <option value="شكوى أو اقتراح">شكوى أو اقتراح</option>
                            <option value="التعاون والشراكات">التعاون والشراكات</option>
                            <option value="أخرى">أخرى</option>
                        </select>
                        <span class="error-message"></span>
                    </div>
                    
                    <div class="form-group">
                        <label for="contactMessage">
                            <i class="fas fa-comment-dots"></i> الرسالة <span class="required">*</span>
                        </label>
                        <textarea id="contactMessage" name="message" required rows="6" placeholder="اكتب رسالتك هنا..."></textarea>
                        <span class="error-message"></span>
                    </div>
                    
                    <button type="submit" class="btn btn-primary btn-block">
                        <i class="fas fa-paper-plane"></i> إرسال الرسالة
                    </button>
                </form>
                
                <div class="form-success" id="formSuccess" style="display: none;">
                    <div class="success-content">
                        <i class="fas fa-check-circle"></i>
                        <h3>تم إرسال رسالتك بنجاح!</h3>
                        <p>شكراً لتواصلك معنا. سنرد عليك في أقرب وقت ممكن.</p>
                    </div>
                </div>
            </div>
            
            <!-- Contact Info -->
            <div class="contact-info-container" data-aos="fade-left">
                
                <!-- Contact Cards -->
                <div class="contact-info-card">
                    <div class="info-icon">
                        <i class="fas fa-map-marker-alt"></i>
                    </div>
                    <div class="info-content">
                        <h3>العنوان</h3>
                        <p>الزاوية التجانية<br>تماسين، تقرت<br>الجزائر</p>
                    </div>
                </div>
                
                <div class="contact-info-card">
                    <div class="info-icon">
                        <i class="fas fa-phone"></i>
                    </div>
                    <div class="info-content">
                        <h3>الهاتف</h3>
                        <p>
                            <a href="tel:+213562036738">+213 562 036 738</a><br>
                        </p>
                    </div>
                </div>
                
                <div class="contact-info-card">
                    <div class="info-icon">
                        <i class="fas fa-envelope"></i>
                    </div>
                    <div class="info-content">
                        <h3>البريد الإلكتروني</h3>
                        <p>
                            <a href="mailto:mouhammedelbachir23@gmail.com">mouhammedelbachir23@gmail.com</a><br>
                        </p>
                    </div>
                </div>
                
                <div class="contact-info-card">
                    <div class="info-icon">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="info-content">
                        <h3>أوقات العمل</h3>
                        <p>
                            السبت - الخميس: 8:00 - 18:00<br>
                            الجمعة: 13:00 - 17:00
                        </p>
                    </div>
                </div>
                
                <!-- Social Media -->
                <div class="social-media-section">
                    <h3><i class="fas fa-share-alt"></i> تابعنا</h3>
                    <div class="social-buttons">
                        <a href="#" class="social-btn facebook" target="_blank">
                            <i class="fab fa-facebook-f"></i>
                            <span>Facebook</span>
                        </a>
                        <a href="#" class="social-btn twitter" target="_blank">
                            <i class="fab fa-twitter"></i>
                            <span>Twitter</span>
                        </a>
                        <a href="#" class="social-btn instagram" target="_blank">
                            <i class="fab fa-instagram"></i>
                            <span>Instagram</span>
                        </a>
                        <a href="#" class="social-btn youtube" target="_blank">
                            <i class="fab fa-youtube"></i>
                            <span>YouTube</span>
                        </a>
                        <a href="#" class="social-btn whatsapp" target="_blank">
                            <i class="fab fa-whatsapp"></i>
                            <span>WhatsApp</span>
                        </a>
                        <a href="#" class="social-btn telegram" target="_blank">
                            <i class="fab fa-telegram"></i>
                            <span>Telegram</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Map Section -->
<section class="map-section" data-aos="fade-up">
    <div class="container">
        <div class="map-header">
            <h2><i class="fas fa-map"></i> موقعنا على الخريطة</h2>
            <p>الزاوية التجانية - تماسين، تقرت، الجزائر</p>
        </div>
        <div class="map-container">
            <iframe 
                src="https://www.google.com/maps/embed?pb=!1m14!1m8!1m3!1d6691.9026756511585!2d6.0100737!3d33.0050584!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x125e9ec23814d34d%3A0x74fa37647c94483d!2z2KfZhNiy2KfZiNmK2Kkg2KfZhNiq2KzYp9mG2YrYqSDYs9mK2K_ZiiDYp9mE2K3Yp9isINi52YTZiiDYp9mE2KrZhdin2LPZitmG2YogLSDYqtmF2KfYs9mK2YY!5e0!3m2!1sar!2sdz!4v1770489827494!5m2!1sar!2sdz" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"
                width="100%" 
                height="450" 
                style="border:0;" 
                allowfullscreen="" 
                loading="lazy"
                referrerpolicy="no-referrer-when-downgrade">
            </iframe>
        </div>
    </div>
</section>

<!-- FAQ Section -->
<section class="section faq-section">
    <div class="container">
        <div class="section-header" data-aos="fade-up">
            <span class="section-label">الأسئلة الشائعة</span>
            <h2 class="section-title">أسئلة يتكرر طرحها</h2>
        </div>
        
        <div class="faq-container">
            <div class="faq-item" data-aos="fade-up" data-aos-delay="100">
                <div class="faq-question">
                    <h3><i class="fas fa-question-circle"></i> كيف يمكنني التسجيل في المدرسة؟</h3>
                    <button class="faq-toggle"><i class="fas fa-chevron-down"></i></button>
                </div>
                <div class="faq-answer">
                    <p>يمكنك التسجيل بكل سهولة من خلال الضغط على زر "سجل الآن" في الصفحة الرئيسية، ثم ملء نموذج التسجيل البسيط. بعد التسجيل ستحصل على رقم تسجيل خاص وجدول الحصص الخاص بك.</p>
                </div>
            </div>
            
            <div class="faq-item" data-aos="fade-up" data-aos-delay="200">
                <div class="faq-question">
                    <h3><i class="fas fa-question-circle"></i> هل التعليم مجاني؟</h3>
                    <button class="faq-toggle"><i class="fas fa-chevron-down"></i></button>
                </div>
                <div class="faq-answer">
                    <p>نعم، جميع البرامج التعليمية في مدرستنا مجانية تماماً لوجه الله تعالى. نحن نؤمن بأن العلم الشرعي يجب أن يكون متاحاً للجميع دون أي تكاليف.</p>
                </div>
            </div>
            
            <div class="faq-item" data-aos="fade-up" data-aos-delay="300">
                <div class="faq-question">
                    <h3><i class="fas fa-question-circle"></i> ما هي المتطلبات التقنية للدراسة؟</h3>
                    <button class="faq-toggle"><i class="fas fa-chevron-down"></i></button>
                </div>
                <div class="faq-answer">
                    <p>تحتاج إلى جهاز كمبيوتر أو هاتف ذكي متصل بالإنترنت، كاميرا وميكروفون للتفاعل مع المعلم. يمكنك الانضمام للحصص عبر Google Meet مباشرة من المتصفح.</p>
                </div>
            </div>
            
            <div class="faq-item" data-aos="fade-up" data-aos-delay="400">
                <div class="faq-question">
                    <h3><i class="fas fa-question-circle"></i> كم عدد الحصص الأسبوعية؟</h3>
                    <button class="faq-toggle"><i class="fas fa-chevron-down"></i></button>
                </div>
                <div class="faq-answer">
                    <p>يختلف عدد الحصص حسب البرنامج الذي تختاره. في المتوسط، هناك من 3 إلى 5 حصص أسبوعية، كل حصة تتراوح بين ساعة إلى ساعتين.</p>
                </div>
            </div>
            
            <div class="faq-item" data-aos="fade-up" data-aos-delay="500">
                <div class="faq-question">
                    <h3><i class="fas fa-question-circle"></i> هل يمكنني تسجيل أطفالي؟</h3>
                    <button class="faq-toggle"><i class="fas fa-chevron-down"></i></button>
                </div>
                <div class="faq-answer">
                    <p>نعم بالتأكيد! لدينا برنامج خاص للأطفال من سن 7 إلى 14 سنة. يمكن لولي الأمر التسجيل نيابة عن أبنائه والإشراف على تعلمهم.</p>
                </div>
            </div>
            
            <div class="faq-item" data-aos="fade-up" data-aos-delay="600">
                <div class="faq-question">
                    <h3><i class="fas fa-question-circle"></i> هل توجد شهادات بعد إتمام الحفظ؟</h3>
                    <button class="faq-toggle"><i class="fas fa-chevron-down"></i></button>
                </div>
                <div class="faq-answer">
                    <p>نعم، نمنح شهادات إتمام الحفظ لكل من يكمل حفظ جزء معين من القرآن الكريم. كما نمنح إجازات للحفاظ المتقنين بعد اختبار شامل.</p>
                </div>
            </div>
        </div>
    </div>
</section>

{% endblock %}

{% block extra_js %}
<script>
// Contact Form Submission
document.getElementById('contactForm').addEventListener('submit', async function(e) {
    e.preventDefault();
    
    // Get form data
    const formData = {
        name: document.getElementById('contactName').value,
        email: document.getElementById('contactEmail').value,
        phone: document.getElementById('contactPhone').value,
        subject: document.getElementById('contactSubject').value,
        message: document.getElementById('contactMessage').value
    };
    
    // Validate
    if (!formData.name || !formData.email || !formData.subject || !formData.message) {
        alert('يرجى ملء جميع الحقول المطلوبة');
        return;
    }
    
    // Show loading
    const submitBtn = this.querySelector('button[type="submit"]');
    const originalText = submitBtn.innerHTML;
    submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> جاري الإرسال...';
    submitBtn.disabled = true;
    
    try {
        const response = await fetch('/api/contact', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(formData)
        });
        
        const result = await response.json();
        
        if (result.success) {
            // Hide form and show success message
            document.getElementById('contactForm').style.display = 'none';
            document.getElementById('formSuccess').style.display = 'block';
            
            // Reset form after 5 seconds
            setTimeout(() => {
                document.getElementById('contactForm').reset();
                document.getElementById('contactForm').style.display = 'block';
                document.getElementById('formSuccess').style.display = 'none';
                submitBtn.innerHTML = originalText;
                submitBtn.disabled = false;
            }, 5000);
        } else {
            alert('حدث خطأ: ' + result.message);
            submitBtn.innerHTML = originalText;
            submitBtn.disabled = false;
        }
    } catch (error) {
        alert('حدث خطأ في الاتصال بالخادم');
        submitBtn.innerHTML = originalText;
        submitBtn.disabled = false;
        console.error(error);
    }
});

// FAQ Toggle
document.querySelectorAll('.faq-toggle').forEach(button => {
    button.addEventListener('click', function() {
        const faqItem = this.closest('.faq-item');
        const isActive = faqItem.classList.contains('active');
        
        // Close all FAQ items
        document.querySelectorAll('.faq-item').forEach(item => {
            item.classList.remove('active');
        });
        
        // Open clicked item if it wasn't active
        if (!isActive) {
            faqItem.classList.add('active');
        }
    });
});
</script>
{% endblock %}
